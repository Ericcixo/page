<!doctype html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"/>
  <title>¬°Gracias por tu compra! | RevendeF√°cil</title>
  <meta name="robots" content="noindex">
  
  <script>
    if(!new URLSearchParams(window.location.search).has('orderId')) window.location.href = '/';
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;700;800&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="assets/css/styles.css?v=final3"/>
  <link rel="icon" href="img/logo.svg"/>
</head>
<body>
  
  <div class="ambient-glows">
    <div class="glow glow-1"></div>
    <div class="glow glow-2"></div>
    <div class="glow glow-3"></div>
  </div>

  <header class="header">
    <div class="header-inner">
      <a href="/" class="social-link" style="width:auto; height:auto; background:none; border:none; color:white; font-weight:700; text-decoration:none;">‚Üê Volver al Inicio</a>
      <div class="brand" style="font-family: var(--font-head); font-weight:800; font-size:20px;">RevendeF√°cil</div>
    </div>
  </header>

  <main class="container">
    <section class="section" style="padding-top: 40px;">
      <div class="reveal" style="text-align:center; max-width:700px; margin:0 auto;">
        <div style="font-size:60px; margin-bottom:20px;">üéâ</div>
        <h1 class="h1-premium">¬°Pedido <span class="gradient-text">Confirmado!</span></h1>
        <p class="subtitle" id="orderMsg">Gracias por confiar en nosotros. Aqu√≠ tienes tus productos listos para descargar.</p>
      </div>

      <div id="downloadsArea" class="grid reveal" style="margin-top: 50px;"></div>

      <div class="glass-panel reveal" style="margin-top: 60px; text-align: center; max-width: 600px; margin-left: auto; margin-right: auto;">
        <h3 style="margin-top:0; font-family:var(--font-head)">¬øProblemas con la descarga?</h3>
        <p style="color:var(--text-muted); margin-bottom:20px">Has recibido tambi√©n una copia en tu correo. Revisa Spam.</p>
        <a href="contact.html" class="btn-ghost">Contactar Soporte</a>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-inner container">
      <div class="brand">RevendeF√°cil ¬© 2025</div>
      <div class="links">
        <a href="/">Inicio</a>
        <a href="terms.html">T√©rminos</a>
        <a href="contact.html">Soporte</a>
      </div>
    </div>
  </footer>

  <script src="assets/js/config.js"></script>
  <script>
    (function(){
      // Parallax Mouse
      document.addEventListener('mousemove', function(e) {
        document.body.style.setProperty('--mouse-x', e.clientX + 'px');
        document.body.style.setProperty('--mouse-y', e.clientY + 'px');
      });

      const CONFIG = window.RF_CONFIG;
      const rawCart = localStorage.getItem('rf_cart');
      const cart = rawCart ? JSON.parse(rawCart) : {providers:[], courses:[]};
      const area = document.getElementById('downloadsArea');
      
      // Mapeo manual de archivos (esto s√≠ es espec√≠fico de descarga)
      const filePaths = {
        'p1': 'proveedor-1.pdf', 'p2': 'proveedor-2.pdf', 'p3': 'proveedor-3.pdf', 'p4': 'proveedor-4.pdf',
        'c1': 'curso-lujo-vinted.pdf', 'c2': 'curso-seguridad-vinted.pdf', 'c3': 'curso-anuncios-vinted.pdf'
      };

      let html = '';
      
      const allItems = [...cart.providers, ...cart.courses.map(c=>c.id)];
      
      // Si el carrito est√° vac√≠o pero hay pedido (refresh), mostrar mensaje gen√©rico
      if(allItems.length === 0){
         document.getElementById('orderMsg').textContent = 'Tu pedido se ha procesado correctamente. Revisa tu email para los enlaces.';
      }

      allItems.forEach(id => {
        const product = CONFIG.products[id]; // Leemos nombre e icono del config central
        const file = filePaths[id];
        
        if(product && file) {
          html += `
          <div class="glass-card" style="align-items:center; text-align:center; padding:30px;">
            <div class="glow-border"></div>
            <div style="font-size:40px; margin-bottom:16px;">${product.icon}</div>
            <h3 style="margin:0 0 8px 0; font-family:var(--font-head)">${product.name}</h3>
            <p style="color:var(--text-muted); font-size:13px; margin-bottom:20px;">Formato PDF ‚Ä¢ Descarga Segura</p>
            <a href="downloads/${file}" download class="btn-glow" style="width:100%; text-decoration:none;">Descargar Ahora ‚Üì</a>
          </div>`;
        }
      });

      if(html) area.innerHTML = html;

      // Limpiar carrito (pedido completado)
      localStorage.removeItem('rf_cart');
      
      setTimeout(() => {
        document.querySelectorAll('.reveal').forEach(el => el.classList.add('visible'));
      }, 100);
    })();
  </script>
</body>
</html>
