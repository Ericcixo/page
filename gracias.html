<!doctype html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"/>
  <title>¬°Gracias por tu compra! | RevendeF√°cil</title>
  <meta name="robots" content="noindex">
  
  <script>
    (function(){
      const params = new URLSearchParams(window.location.search);
      // Si no hay orderId en la URL, te expulsa a la home
      if(!params.has('orderId')) {
        window.location.href = '/';
      }
    })();
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;700;800&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="assets/css/styles.css?v=final2"/>
  <link rel="icon" href="img/logo.svg"/>
</head>
<body>
  
  <div class="ambient-glows">
    <div class="glow glow-1"></div>
    <div class="glow glow-2"></div>
    <div class="glow glow-3"></div>
  </div>

  <header class="header">
    <div class="header-inner">
      <a href="/" class="social-link" style="width:auto; height:auto; background:none; border:none; color:white; font-weight:700; text-decoration:none;">‚Üê Volver al Inicio</a>
      <div class="brand" style="font-family: var(--font-head); font-weight:800; font-size:20px;">RevendeF√°cil</div>
    </div>
  </header>

  <main class="container">
    <section class="section" style="padding-top: 40px;">
      <div class="reveal" style="text-align:center; max-width:700px; margin:0 auto;">
        <div style="font-size:60px; margin-bottom:20px;">üéâ</div>
        <h1 class="h1-premium">¬°Pedido <span class="gradient-text">Confirmado!</span></h1>
        <p class="subtitle" id="orderMsg">Gracias por confiar en nosotros. Aqu√≠ tienes tus productos listos para descargar.</p>
      </div>

      <div id="downloadsArea" class="grid reveal" style="margin-top: 50px;">
        </div>

      <div class="glass-panel reveal" style="margin-top: 60px; text-align: center; max-width: 600px; margin-left: auto; margin-right: auto;">
        <h3 style="margin-top:0; font-family:var(--font-head)">¬øProblemas con la descarga?</h3>
        <p style="color:var(--text-muted); margin-bottom:20px">Has recibido tambi√©n una copia de los enlaces en tu correo electr√≥nico. Revisa tu carpeta de Spam.</p>
        <a href="contact.html" class="btn-ghost">Contactar Soporte</a>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-inner container">
      <div class="brand">RevendeF√°cil ¬© 2025</div>
      <div class="links">
        <a href="/">Inicio</a>
        <a href="terms.html">T√©rminos</a>
        <a href="contact.html">Soporte</a>
      </div>
    </div>
  </footer>

  <script>
    (function(){
      // Parallax
      document.addEventListener('mousemove', function(e) {
        const x = e.clientX / window.innerWidth;
        const y = e.clientY / window.innerHeight;
        const g1 = document.querySelector('.glow-1');
        const g2 = document.querySelector('.glow-2');
        if(g1) g1.style.transform = `translate(${x*30}px, ${y*30}px)`;
        if(g2) g2.style.transform = `translate(-${x*40}px, -${y*40}px)`;
      });

      // Leer carrito anterior
      const rawCart = localStorage.getItem('rf_cart');
      const cart = rawCart ? JSON.parse(rawCart) : {providers:[], courses:[]};
      
      const area = document.getElementById('downloadsArea');
      let html = '';

      const fileMap = {
        'p1': { name: 'Prov. Zapatillas', file: 'proveedor-1.pdf', icon: 'üëü' },
        'p2': { name: 'Prov. Vapers', file: 'proveedor-2.pdf', icon: 'üí®' },
        'p3': { name: 'Prov. Relojes', file: 'proveedor-3.pdf', icon: '‚åö' },
        'p4': { name: 'Prov. Colonias', file: 'proveedor-4.pdf', icon: '‚ú®' },
        'c1': { name: 'Curso Lujo', file: 'curso-lujo-vinted.pdf', icon: 'üíé' },
        'c2': { name: 'Curso Seguridad', file: 'curso-seguridad-vinted.pdf', icon: 'üîí' },
        'c3': { name: 'Curso Anuncios', file: 'curso-anuncios-vinted.pdf', icon: 'üì¢' }
      };

      // Si no hay carrito pero hay orderId (re-visita), mostramos todo por si acaso o un mensaje generico
      // Para simplicidad en este modelo est√°tico, si el carrito se borr√≥, mostramos un mensaje de "Revisa tu email".
      if((!cart.providers || cart.providers.length===0) && (!cart.courses || cart.courses.length===0)){
         document.getElementById('orderMsg').textContent = 'Tu pedido se ha procesado. Revisa tu email para los enlaces de descarga.';
      } else {
          // Generar Cards
          if(cart.providers) cart.providers.forEach(id => { if(fileMap[id]) html += createCard(fileMap[id]); });
          if(cart.courses) cart.courses.forEach(c => { if(fileMap[c.id]) html += createCard(fileMap[c.id]); });
          if(html) area.innerHTML = html;
      }

      function createCard(item){
        return `
        <div class="glass-card" style="align-items:center; text-align:center; padding:30px;">
          <div class="glow-border"></div>
          <div style="font-size:40px; margin-bottom:16px;">${item.icon}</div>
          <h3 style="margin:0 0 8px 0; font-family:var(--font-head)">${item.name}</h3>
          <p style="color:var(--text-muted); font-size:13px; margin-bottom:20px;">Formato PDF ‚Ä¢ Descarga Segura</p>
          <a href="downloads/${item.file}" download class="btn-glow" style="width:100%; text-decoration:none;">Descargar Ahora ‚Üì</a>
        </div>
        `;
      }

      // Limpiar carrito
      localStorage.removeItem('rf_cart');
      
      setTimeout(() => {
        document.querySelectorAll('.reveal').forEach(el => el.classList.add('visible'));
      }, 100);
    })();
  </script>
</body>
</html>
